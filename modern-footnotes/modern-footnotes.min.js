/* Copyright 2017 Sean Williams
    This file is part of Modern Footnotes.

    Modern Footnotes is free software: you can redistribute it and/or modify
    it under the terms of the GNU Lesser General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    Modern Footnotes is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU Lesser General Public License for more details.

    You should have received a copy of the GNU Lesser General Public License
    along with Modern Footnotes.  If not, see https://www.gnu.org/licenses/lgpl-3.0.en.html.
*/
function modern_footnotes_hide_footnotes(){jQuery(".modern-footnotes-footnote a").each(function(){var a=jQuery(this);a.data("unopenedContent")&&a.html(a.data("unopenedContent"))}),jQuery(".modern-footnotes-footnote__note").hide(),jQuery(".modern-footnotes-footnote__connector").remove(),jQuery(".modern-footnotes-footnote--selected").removeClass("modern-footnotes-footnote--selected")}jQuery(function(a){a(document).on("click",".modern-footnotes-footnote a",null,function(b){b.preventDefault(),b.stopPropagation();var c=a(this).parent().next(".modern-footnotes-footnote__note");if(c.is(":hidden"))if(a(window).width()>=768&&modern_footnotes_hide_footnotes(),c.toggle(),a(window).width()>=768){a(this).parent().toggleClass("modern-footnotes-footnote--selected"),c.addClass("modern-footnotes-footnote__note--desktop").removeClass("modern-footnotes-footnote__note--mobile");var d=a(this).parent().position(),e=a(this).parent().parent().css("line-height").replace(/px/,""),f=c.outerWidth(),h=(a(window).width(),d.left-f/2);h<0&&(h=8),h+f>a(window).width()&&(h=a(window).width()-f);var i=parseInt(d.top)+parseInt(e);c.css({top:i+"px",left:h+"px"}),c.after('<div class="modern-footnotes-footnote__connector"></div>');var j=a(this).parent().position(),k=a(this).parent().outerHeight(),l=a(this).parent().outerWidth(),m=i-j.top-k;a(".modern-footnotes-footnote__connector").css({top:j.top+k+"px",height:m,left:j.left+l/2+"px"})}else c.removeClass("modern-footnotes-footnote__note--desktop").addClass("modern-footnotes-footnote__note--mobile").css("display","block"),a(this).data("unopenedContent",a(this).html()),a(this).html("x");else modern_footnotes_hide_footnotes()}).on("click",".modern-footnotes-footnote__note",null,function(a){a.stopPropagation()}).on("click",".modern-footnotes-footnote__note__close a",null,function(a){a.preventDefault(),modern_footnotes_hide_footnotes()}).on("click",function(){modern_footnotes_hide_footnotes()}),a(window).resize(function(){modern_footnotes_hide_footnotes()})});